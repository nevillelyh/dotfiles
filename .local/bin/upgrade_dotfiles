#!/bin/bash

set -euo pipefail

status=$(git status --porcelain --untracked-files=no)
[ -z "$status" ] || git stash save "tmp-git-update"
git pull
git submodule update --remote
[ -z "$status" ] || git stash pop

nvim -u $HOME/.config/nvim/dein.vim --headless '+call dein#update() | qall'

set +u
source "$HOME/.sdkman/bin/sdkman-init.sh"
sdk upgrade
