#!/bin/zsh

set -euo pipefail

source "$HOME/.dotfiles/oh-my-zsh/lib/functions.zsh"
upgrade_oh_my_zsh

STATUS=$(git status --porcelain --untracked-files=no)
[ -z "$STATUS" ] || git stash save "tmp-git-update"
git pull
git submodule update --remote
[ -z "$STATUS" ] || git stash pop

nvim -u $HOME/.config/nvim/dein.vim --headless '+call dein#update() | qall'

set +u
source "$HOME/.sdkman/bin/sdkman-init.sh"
sdk upgrade
