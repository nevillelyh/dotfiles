#!/bin/bash

set -euo pipefail

if ! type docker &> /dev/null; then
    echo "Docker not installed"
    exit 1
fi

docker pull -q nevillelyh/joplin-cli > /dev/null
docker volume inspect joplin-cli &> /dev/null || docker volume create joplin-cli

CMD='docker run -it -v joplin-cli:/root/.config/joplin --rm nevillelyh/joplin-cli:latest'
if tty &> /dev/null; then
    $CMD
else
    alacritty -e $CMD
fi
