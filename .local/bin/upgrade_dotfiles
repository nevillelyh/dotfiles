#!/bin/zsh

set -euo pipefail

cd $HOME
STATUS=$(git status --porcelain --untracked-files=no)
[ -z "$STATUS" ] || git stash save "tmp-git-update"
git pull
git submodule update --init --remote
[ -z "$STATUS" ] || git stash pop

nvim -u $HOME/.config/nvim/dein.vim --headless '+call dein#update() | qall'

set +eu

source "$HOME/.dotfiles/oh-my-zsh/oh-my-zsh.sh"
omz update

source "$HOME/.sdkman/bin/sdkman-init.sh"
sdk update
sdk upgrade

set -euo pipefail

pip install --upgrade flake8 ipython pip virtualenvwrapper

rustup update
